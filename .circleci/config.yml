version: 2.1

orbs:
  matlab: mathworks/matlab@0.2.1
  
jobs:
  build:
    machine:
      image: 'ubuntu-2004:202010-01'
    resource_class: medium
    steps:
      - checkout
      - matlab/install:
          release: "latest"
      - run: matlab -batch "addpath([genpath('source') genpath('tests')]), savepath pathdef.m;"
      - run: matlab -nodisplay -batch "runtests"
      - store_test_results:
          path: test-results
