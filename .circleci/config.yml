version: 2.1

orbs:
  matlab: mathworks/matlab@0.2.1
  
jobs:
  build:
    machine:
      image: 'ubuntu-2004:202010-01'
    resource_class: medium
    steps:
      - checkout
      - matlab/install:
          release: "latest"
      - run: sudo apt-get update
      - run: sudo apt-get install gcc-8
      - run: matlab -batch "addpath([genpath('source') genpath('tests')]), savepath pathdef.m;"
      - run: matlab -batch "run_wecSim_tests"
