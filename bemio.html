

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>BEMIO Functions &mdash; WEC-Sim  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/table_wrap.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> WEC-Sim
          

          
          </a>

          
            
            
              <div class="version">
                v4.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="theory.html">Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_structure.html">Code Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_features.html">Advanced Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="webinars.html">Webinars</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="acknowledgements.html">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Online Forum</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">WEC-Sim API</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminology.html">Terminology</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">WEC-Sim</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>BEMIO Functions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/bemio.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p>The Boundary Element Method Input/Output (BEMIO) functions are used to pre-process the BEM hydrodynamic data prior to running WEC-Sim. For more information about the WEC-Sim workflow, refer to <a class="reference internal" href="overview.html#running-wec-sim"><span class="std std-ref">Running WEC-Sim</span></a>. BEMIO functions perform the following tasks:</p>
<ul class="simple">
<li><p>Read BEM results from <strong>WAMIT</strong>, <strong>NEMOH</strong>, or <strong>AQWA</strong>.</p></li>
<li><p>Calculate the radiation and excitation impulse response functions (IRFs).</p></li>
<li><p>Calculate the state space realization for the radiation IRF.</p></li>
<li><p>Save the resulting data in Hierarchical Data Format 5 (HDF5).</p></li>
<li><p>Plot typical hydrodynamic data for user verification.</p></li>
</ul>
<p>The BEMIO tutorials are included in the <code class="docutils literal notranslate"><span class="pre">$WECSIM/tutorials/BEMIO</span></code> directory in the WEC-Sim source code. For more information, refer to <a class="reference internal" href="webinars.html#webinar1"><span class="std std-ref">Webinar 1 - BEMIO and MCR</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Previously the <a class="reference external" href="http://wec-sim.github.io/bemio/installing.html">python based BEMIO code</a> was used for this purpose. The python BEMIO functions have been converted to MATLAB and are included in the WEC-Sim source code. The python based BEMIO code will remain available but will no longer be  supported.</p>
</div>
<div class="section" id="bemio-functions">
<h1>BEMIO Functions<a class="headerlink" href="#bemio-functions" title="Permalink to this headline">¶</a></h1>
<p><strong>Read_WAMIT:</strong> Reads data from a WAMIT output file</p>
<blockquote>
<div><dl class="simple">
<dt><em>hydro = Read_WAMIT(hydro, filename, ex_coeff)</em></dt><dd><ul class="simple">
<li><p><em>hydro</em> – data structure</p></li>
<li><p><em>filename</em> – <code class="docutils literal notranslate"><span class="pre">*.out</span></code> WAMIT output file</p></li>
<li><p><em>ex_coeff</em> - flag indicating the type of excitation force coefficients to read, ‘diffraction’ (default) or ‘haskind’</p></li>
</ul>
</dd>
</dl>
</div></blockquote>
<p><strong>Read_NEMOH:</strong> Reads data from a NEMOH working folder</p>
<blockquote>
<div><dl class="simple">
<dt><em>hydro = Read_NEMOH(hydro, filedir)</em></dt><dd><ul class="simple">
<li><p><em>hydro</em> – data structure</p></li>
<li><dl class="simple">
<dt><em>filedir</em> – NEMOH working folder, must include:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Nemoh.cal</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Mesh/Hydrostatics.dat</span></code> (or <code class="docutils literal notranslate"><span class="pre">Hydrostatiscs_0.dat</span></code>, <code class="docutils literal notranslate"><span class="pre">Hydrostatics_1.dat</span></code>, etc. for multiple bodies)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Mesh/KH.dat</span></code> (or <code class="docutils literal notranslate"><span class="pre">KH_0.dat</span></code>, <code class="docutils literal notranslate"><span class="pre">KH_1.dat</span></code>, etc. for multiple bodies)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Results/RadiationCoefficients.tec</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Results/ExcitationForce.tec</span></code></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Instructions on how to download and use the open source BEM code NEMOH are provided on the <a class="reference external" href="https://lheea.ec-nantes.fr/logiciels-et-brevets/nemoh-presentation-192863.kjsp">NEMOH website</a>.</p></li>
<li><p>The NEMOH Mesh.exe code creates the <code class="docutils literal notranslate"><span class="pre">Hydrostatics.dat</span></code> and <code class="docutils literal notranslate"><span class="pre">KH.dat</span></code> files (among other files) for one input body at a time. For the Read_NEMOH function to work correctly in the case of a multiple body system, the user must manually rename <code class="docutils literal notranslate"><span class="pre">Hydrostatics.dat</span></code> and <code class="docutils literal notranslate"><span class="pre">KH.dat</span></code> files to <code class="docutils literal notranslate"><span class="pre">Hydrostatics_0.dat</span></code>, <code class="docutils literal notranslate"><span class="pre">Hydrostatics_1.dat</span></code>, …, and <code class="docutils literal notranslate"><span class="pre">KH_0.dat</span></code>, <code class="docutils literal notranslate"><span class="pre">KH_1.dat</span></code>,…, corresponding to the body order specified in the <code class="docutils literal notranslate"><span class="pre">Nemoh.cal</span></code> file.</p></li>
</ul>
</div>
<p><strong>Read_AQWA:</strong> Reads data from AQWA output files</p>
<blockquote>
<div><dl class="simple">
<dt><em>hydro = Read_AQWA(hydro, ah1_filename, lis_filename)</em></dt><dd><ul class="simple">
<li><p><em>hydro</em> – data structure</p></li>
<li><p><em>ah1_filename</em> – <code class="docutils literal notranslate"><span class="pre">*.AH1</span></code> AQWA output file</p></li>
<li><p><em>lis_filename</em> – <code class="docutils literal notranslate"><span class="pre">*.LIS</span></code> AQWA output file</p></li>
</ul>
</dd>
</dl>
</div></blockquote>
<p><strong>Normalize:</strong> Normalizes NEMOH and AQWA hydrodynamics coefficients in the same manner that WAMIT outputs are normalized. Specifically, the linear hydrostatic restoring stiffness is normalized as, <img class="math" src="_images/math/344def50d7aa2806d1ec23f46224375f77171e05.png" alt="C_{i,j}/\rho g"/>; the radiation added mass is normalized as, <img class="math" src="_images/math/1e9d30da3f3a76e632c18377a62d18b9574f1d88.png" alt="A_{i,j}/\rho"/>; radiation wave damping is normalized as, <img class="math" src="_images/math/bd0641be618cd65321f30fdfbf9425e2934b0b00.png" alt="B_{i,j}/\rho \omega"/>; and the wave-exciting forces are normalized as, <img class="math" src="_images/math/fee6e4804a77e76d25fe89effe8aef0b0a1df5fc.png" alt="X_i/\rho g"/>. Typically, this function would not be called directly by the user; it is automatically implemented within the Read_NEMOH and Read_AQWA functions.</p>
<blockquote>
<div><dl class="simple">
<dt><em>hydro = Normalize(hydro)</em></dt><dd><ul class="simple">
<li><p><em>hydro</em> – data structure</p></li>
</ul>
</dd>
</dl>
</div></blockquote>
<p><strong>Combine_BEM:</strong> Combines multiple BEM outputs into one hydrodynamic “system”. This function requires that all BEM outputs have the same water depth, wave frequencies, and wave headings. This function would be implemented following multiple Read functions and before the IRF, Write_H5, or Plot_BEMIO functions.</p>
<blockquote>
<div><dl class="simple">
<dt><em>hydro = Combine_BEM(hydro)</em></dt><dd><ul class="simple">
<li><p><em>hydro</em> – data structure</p></li>
</ul>
</dd>
</dl>
</div></blockquote>
<p><strong>Radiation_IRF:</strong> Calculates the normalized radiation impulse response function.</p>
<blockquote>
<div><p><img class="math" src="_images/math/48ca99127a87633820bbe141a79709c609813312.png" alt="\overline{K}_{r,i,j}(t) = {\frac{2}{\pi}}\intop_0^{\infty}{\frac{B_{i,j}(\omega)}{\rho}}\cos({\omega}t)d\omega"/></p>
<dl class="simple">
<dt><em>hydro = Radiation_IRF(hydro, t_end, n_t, n_w, w_min, w_max)</em></dt><dd><ul class="simple">
<li><p><em>hydro</em> – data structure</p></li>
<li><p><em>t_end</em> – calculation range for the IRF, where the IRF is calculated from t = 0 to t_end, and the default is 100 s</p></li>
<li><p><em>n_t</em> – number of time steps in the IRF, the default is 1001</p></li>
<li><p><em>n_w</em> – number of frequency steps used in the IRF calculation (hydrodynamic coefficients are interpolated to correspond), the default is 1001</p></li>
<li><p><em>w_min</em> – minimum frequency to use in the IRF calculation, the default is the minimum frequency from the BEM data</p></li>
<li><p><em>w_max</em> – maximum frequency to use in the IRF calculation, the default is the maximum frequency from the BEM data.</p></li>
</ul>
</dd>
</dl>
</div></blockquote>
<p><strong>Radiation_IRF_SS:</strong> Calculates the state space (SS) realization of the radiation IRF. If this function is used, it must be implemented after the Radiation_IRF function.</p>
<blockquote>
<div><dl class="simple">
<dt><em>hydro = Radiation_IRF_SS(hydro, Omax, R2t)</em></dt><dd><ul class="simple">
<li><p><em>hydro</em> – data structure</p></li>
<li><p><em>Omax</em> – maximum order of the SS realization, the default is 10</p></li>
<li><p><em>R2t</em> – <img class="math" src="_images/math/2fc807898ff2ed580bd1543c9d726076fe764032.png" alt="R^2"/> threshold (coefficient of determination) for the SS realization, where <img class="math" src="_images/math/2fc807898ff2ed580bd1543c9d726076fe764032.png" alt="R^2"/> may range from 0 to 1, and the default is 0.95</p></li>
</ul>
</dd>
</dl>
</div></blockquote>
<p><strong>Excitation_IRF:</strong> Calculates the excitation impulse response function.</p>
<blockquote>
<div><p><img class="math" src="_images/math/e3003948420eb1a91a33c4828e913f9e14e65422.png" alt="\overline{K}_{e,i,\beta}(t) = {\frac{1}{2\pi}}\intop_{-\infty}^{\infty}{\frac{X_i(\omega,\beta)e^{i{\omega}t}}{{\rho}g}}d\omega"/></p>
<dl class="simple">
<dt><em>hydro = Excitation_IRF(hydro, t_end, n_t, n_w, w_min, w_max)</em></dt><dd><ul class="simple">
<li><p><em>hydro</em> – data structure</p></li>
<li><p><em>t_end</em> – calculation range for the IRF, where the IRF is calculated from t = -t_end to t_end, and the default is 100 s</p></li>
<li><p><em>n_t</em> – number of time steps in the IRF, the default is 1001</p></li>
<li><p><em>n_w</em> – number of frequency steps used in the IRF calculation (hydrodynamic coefficients are interpolated to correspond), the default is 1001</p></li>
<li><p><em>w_min</em> – minimum frequency to use in the IRF calculation, the default is the minimum frequency from the BEM data</p></li>
<li><p><em>w_max</em> – maximum frequency to use in the IRF calculation, the default is the maximum frequency from the BEM data.</p></li>
</ul>
</dd>
</dl>
</div></blockquote>
<p><strong>Write_H5:</strong> Writes the hydro data structure to a <code class="docutils literal notranslate"><span class="pre">*.h5</span></code> file.</p>
<blockquote>
<div><dl class="simple">
<dt>Write_H5(hydro)</dt><dd><ul class="simple">
<li><p><em>hydro</em> – data structure</p></li>
</ul>
</dd>
</dl>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Technically, this step should not be necessary - the MATLAB data structure <em>hydro</em> is written to a <code class="docutils literal notranslate"><span class="pre">*.h5</span></code> file by BEMIO and then read back into a new MATLAB data structure <em>hydroData</em> for each body by WEC-Sim. The reasons this step was retained were, first, to remain compatible with the python based BEMIO output and, second, for the simpler data visualization and verification capabilities offered by the <code class="docutils literal notranslate"><span class="pre">*.h5</span></code> file viewer.</p>
</div>
<p><strong>Plot_BEMIO:</strong> Plots the radiation added mass, radiation wave damping, radiation IRF, excitation force magnitude, excitation force phase, and excitation IRF for each body in the heave, surge and pitch degrees of freedom.</p>
<blockquote>
<div><dl class="simple">
<dt><em>Plot_BEMIO(hydro)</em></dt><dd><ul class="simple">
<li><p><em>hydro</em> – data structure</p></li>
</ul>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="bemio-hydro-data-structure">
<h1>BEMIO <em>hydro</em> Data Structure<a class="headerlink" href="#bemio-hydro-data-structure" title="Permalink to this headline">¶</a></h1>
<table class="docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 15%" />
<col style="width: 78%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Variable</strong></p></td>
<td><p><strong>Format</strong></p></td>
<td><p><strong>Description</strong></p></td>
</tr>
<tr class="row-even"><td><p>A</p></td>
<td><p>[6*Nb,6*Nb,Nf]</p></td>
<td><p>radiation added mass</p></td>
</tr>
<tr class="row-odd"><td><p>Ainf</p></td>
<td><p>[6*Nb,6*Nb]</p></td>
<td><p>infinite frequency added mass</p></td>
</tr>
<tr class="row-even"><td><p>B</p></td>
<td><p>[6*Nb,6*Nb,Nf]</p></td>
<td><p>radiation wave damping</p></td>
</tr>
<tr class="row-odd"><td><p>theta</p></td>
<td><p>[1,Nh]</p></td>
<td><p>wave headings (deg)</p></td>
</tr>
<tr class="row-even"><td><p>body</p></td>
<td><p>{1,Nb}</p></td>
<td><p>body names</p></td>
</tr>
<tr class="row-odd"><td><p>cb</p></td>
<td><p>[3,Nb]</p></td>
<td><p>center of buoyancy</p></td>
</tr>
<tr class="row-even"><td><p>cg</p></td>
<td><p>[3,Nb]</p></td>
<td><p>center of gravity</p></td>
</tr>
<tr class="row-odd"><td><p>code</p></td>
<td><p>string</p></td>
<td><p>BEM code (WAMIT, AQWA, or NEMOH)</p></td>
</tr>
<tr class="row-even"><td><p>dof</p></td>
<td><p>[6 + GBM, Nb]</p></td>
<td><p>Degrees of freedom (DOF) for each body. Default DOF for each body is 6 plus number of possible generalized body modes (GBM).</p></td>
</tr>
<tr class="row-odd"><td><p>exc_im</p></td>
<td><p>[6*Nb,Nh,Nf]</p></td>
<td><p>imaginary component of excitation force or torque</p></td>
</tr>
<tr class="row-even"><td><p>exc_K</p></td>
<td><p>[6*Nb,Nh,length(ex_t)]</p></td>
<td><p>excitation IRF</p></td>
</tr>
<tr class="row-odd"><td><p>exc_ma</p></td>
<td><p>[6*Nb,Nh,Nf]</p></td>
<td><p>magnitude of excitation force or torque</p></td>
</tr>
<tr class="row-even"><td><p>exc_ph</p></td>
<td><p>[6*Nb,Nh,Nf]</p></td>
<td><p>phase of excitation force or torque</p></td>
</tr>
<tr class="row-odd"><td><p>exc_re</p></td>
<td><p>[6*Nb,Nh,Nf]</p></td>
<td><p>real component of excitation force or torque</p></td>
</tr>
<tr class="row-even"><td><p>exc_t</p></td>
<td><p>[1,length(ex_t)]</p></td>
<td><p>time steps in the excitation IRF</p></td>
</tr>
<tr class="row-odd"><td><p>exc_w</p></td>
<td><p>[1,length(ex_w)]</p></td>
<td><p>frequency step in the excitation IRF</p></td>
</tr>
<tr class="row-even"><td><p>file</p></td>
<td><p>string</p></td>
<td><p>BEM output filename</p></td>
</tr>
<tr class="row-odd"><td><p>fk_im</p></td>
<td><p>[6*Nb,Nh,Nf]</p></td>
<td><p>imaginary component of Froude-Krylov contribution to the excitation force or torque</p></td>
</tr>
<tr class="row-even"><td><p>fk_ma</p></td>
<td><p>[6*Nb,Nh,Nf]</p></td>
<td><p>magnitude of Froude-Krylov excitation component</p></td>
</tr>
<tr class="row-odd"><td><p>fk_ph</p></td>
<td><p>[6*Nb,Nh,Nf]</p></td>
<td><p>phase of Froude-Krylov excitation component</p></td>
</tr>
<tr class="row-even"><td><p>fk_re</p></td>
<td><p>[6*Nb,Nh,Nf]</p></td>
<td><p>real component of Froude-Krylov contribution to the excitation force or torque</p></td>
</tr>
<tr class="row-odd"><td><p>g</p></td>
<td><p>[1,1]</p></td>
<td><p>gravity</p></td>
</tr>
<tr class="row-even"><td><p>h</p></td>
<td><p>[1,1]</p></td>
<td><p>water depth</p></td>
</tr>
<tr class="row-odd"><td><p>Khs</p></td>
<td><p>[6,6,Nb]</p></td>
<td><p>hydrostatic restoring stiffness</p></td>
</tr>
<tr class="row-even"><td><p>Nb</p></td>
<td><p>[1,1]</p></td>
<td><p>number of bodies</p></td>
</tr>
<tr class="row-odd"><td><p>Nf</p></td>
<td><p>[1,1]</p></td>
<td><p>number of wave frequencies</p></td>
</tr>
<tr class="row-even"><td><p>Nh</p></td>
<td><p>[1,1]</p></td>
<td><p>number of wave headings</p></td>
</tr>
<tr class="row-odd"><td><p>ra_K</p></td>
<td><p>[6*Nb,6*Nb,length(ra_t)]</p></td>
<td><p>radiation IRF</p></td>
</tr>
<tr class="row-even"><td><p>ra_t</p></td>
<td><p>[1,length(ra_t)]</p></td>
<td><p>time steps in the radiation IRF</p></td>
</tr>
<tr class="row-odd"><td><p>ra_w</p></td>
<td><p>[1,length(ra_w)]</p></td>
<td><p>frequency steps in the radiation IRF</p></td>
</tr>
<tr class="row-even"><td><p>rho</p></td>
<td><p>[1,1]</p></td>
<td><p>density</p></td>
</tr>
<tr class="row-odd"><td><p>sc_im</p></td>
<td><p>[6*Nb,Nh,Nf]</p></td>
<td><p>imaginary component of scattering contribution to the excitation force or torque</p></td>
</tr>
<tr class="row-even"><td><p>sc_ma</p></td>
<td><p>[6*Nb,Nh,Nf]</p></td>
<td><p>magnitude of scattering excitation component</p></td>
</tr>
<tr class="row-odd"><td><p>sc_ph</p></td>
<td><p>[6*Nb,Nh,Nf]</p></td>
<td><p>phase of scattering excitation component</p></td>
</tr>
<tr class="row-even"><td><p>sc_re</p></td>
<td><p>[6*Nb,Nh,Nf]</p></td>
<td><p>real component of scattering contribution to the excitation force or torque</p></td>
</tr>
<tr class="row-odd"><td><p>ss_A</p></td>
<td><p>[6*Nb,6*Nb,ss_O,ss_O]</p></td>
<td><p>state space A matrix</p></td>
</tr>
<tr class="row-even"><td><p>ss_B</p></td>
<td><p>[6*Nb,6*Nb,ss_O,1]</p></td>
<td><p>state space B matrix</p></td>
</tr>
<tr class="row-odd"><td><p>ss_C</p></td>
<td><p>[6*Nb,6*Nb,1,ss_O]</p></td>
<td><p>state space C matrix</p></td>
</tr>
<tr class="row-even"><td><p>ss_conv</p></td>
<td><p>[6*Nb,6*Nb]</p></td>
<td><p>state space convergence flag</p></td>
</tr>
<tr class="row-odd"><td><p>ss_D</p></td>
<td><p>[6*Nb,6*Nb,1]</p></td>
<td><p>state space D matrix</p></td>
</tr>
<tr class="row-even"><td><p>ss_K</p></td>
<td><p>[6*Nb,6*Nb,length(ra_t)]</p></td>
<td><p>state space radiation IRF</p></td>
</tr>
<tr class="row-odd"><td><p>ss_O</p></td>
<td><p>[6*Nb,6*Nb]</p></td>
<td><p>state space order</p></td>
</tr>
<tr class="row-even"><td><p>ss_R2</p></td>
<td><p>[6*Nb,6*Nb]</p></td>
<td><p>state space R2 fit</p></td>
</tr>
<tr class="row-odd"><td><p>T</p></td>
<td><p>[1,Nf]</p></td>
<td><p>wave periods</p></td>
</tr>
<tr class="row-even"><td><p>Vo</p></td>
<td><p>[1,Nb]</p></td>
<td><p>displaced volume</p></td>
</tr>
<tr class="row-odd"><td><p>omega</p></td>
<td><p>[1,Nf]</p></td>
<td><p>wave frequencies</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="writing-your-own-h5-file">
<h1>Writing Your Own h5 File<a class="headerlink" href="#writing-your-own-h5-file" title="Permalink to this headline">¶</a></h1>
<p>The most common way of creating a <code class="docutils literal notranslate"><span class="pre">*.h5</span></code> file is using BEMIO to post-process the outputs of a BEM code.
This requires a single BEM solution that contains all hydrodynamic bodies and accounts for body-to-body interactions.
Some cases in which you might want to create your own h5 file are:</p>
<ul class="simple">
<li><p>Use experimentally determined coefficients or a mix of BEM and experimental coefficients.</p></li>
<li><p>Combine results from different BEM files and have the coefficient matrices be the correct size for the new total number of bodies.</p></li>
<li><p>Modify the BEM results for any other reason.</p></li>
</ul>
<p>MATLAB and Python have functions to read and write <code class="docutils literal notranslate"><span class="pre">*.h5</span></code> files easily.
WEC-Sim includes three functions to help you create your own <code class="docutils literal notranslate"><span class="pre">*.h5</span></code> file.
These are found under <code class="docutils literal notranslate"><span class="pre">$WECSIM/functions/writeH5/</span></code>.
The header comments of each function explain the inputs and outputs.
An example of how to use <code class="docutils literal notranslate"><span class="pre">write_hdf5</span></code>  is provided in the <a class="reference external" href="https://github.com/WEC-Sim/WEC-Sim_Applications">WEC-Sim Applications</a> repository.
The first step is to have all the required coefficients and properties in Matlab in the correct format.
Then the functions provided are used to create and populate the <code class="docutils literal notranslate"><span class="pre">*.h5</span></code> file.</p>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2014, National Renewable Energy Laboratory and National Technology &amp; Engineering Solutions of Sandia, LLC (NTESS)

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-88158104-1', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>