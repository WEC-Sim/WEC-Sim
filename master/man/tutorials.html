

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Tutorials &mdash; WEC-Sim  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  <link rel="stylesheet" href="../_static/banner.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Advanced Features" href="advanced_features.html" />
    <link rel="prev" title="Code Structure" href="code_structure.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> WEC-Sim
          

          
          </a>

          
            
            
              <div class="version">
                v4.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="theory.html">Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_structure.html">Code Structure</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#two-body-point-absorber-rm3">Two-Body Point Absorber (RM3)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#device-geometry">Device Geometry</a></li>
<li class="toctree-l3"><a class="reference internal" href="#model-files">Model Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rm3-tutorial">RM3 Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#step-1-run-bemio">Step 1: Run BEMIO</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-2-build-simulink-model">Step 2: Build Simulink Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-3-write-wecsiminputfile-m">Step 3: Write wecSimInputFile.m</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-4-run-wec-sim">Step 4: Run WEC-Sim</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-5-post-processing">Step 5: Post-processing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#oscillating-surge-wec-oswec">Oscillating Surge WEC (OSWEC)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">Device Geometry</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">Model Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#oswec-tutorial">OSWEC Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">Step 1: Run BEMIO</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">Step 2: Build Simulink Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id7">Step 3: Write wecSimInputFile.m</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">Step 4: Run WEC-Sim</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">Step 5: Post-processing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#wec-sim-examples">WEC-Sim Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="#other-applications">Other Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#body-to-body-interactions">Body-to-Body Interactions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#desalination">Desalination</a></li>
<li class="toctree-l3"><a class="reference internal" href="#free-decay">Free Decay</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generalized-body-modes">Generalized Body Modes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mooring">Mooring</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multiple-condition-run">Multiple Condition Run</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nonhydrodynamic-body">Nonhydrodynamic Body</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nonlinear-hydrodynamic-body">Nonlinear Hydrodynamic Body</a></li>
<li class="toctree-l3"><a class="reference internal" href="#numerical-options">Numerical Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#paraview-visualization">Paraview Visualization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#passive-yaw">Passive Yaw</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pto-sim">PTO-Sim</a></li>
<li class="toctree-l3"><a class="reference internal" href="#wecccomp">WECCCOMP</a></li>
<li class="toctree-l3"><a class="reference internal" href="#write-hdf5">Write HDF5</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="advanced_features.html">Advanced Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="webinars.html">Webinars</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="acknowledgements.html">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">WEC-Sim API</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminology.html">Terminology</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">WEC-Sim</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Tutorials</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/man/tutorials.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  





<div class="section" id="tutorials">
<span id="id1"></span><h1>Tutorials<a class="headerlink" href="#tutorials" title="Permalink to this headline">¶</a></h1>
<p>This section provides step-by-step instructions on how to run the WEC-Sim code using the provided Tutorials (located in the WEC-Sim <code class="docutils literal notranslate"><span class="pre">$WECSIM/tutorials</span></code> directory).
Two WEC-Sim tutorials are provided: the Two-Body Point Absorber (RM3), and the Oscillating Surge WEC (OSWEC).
For information about the implementation of the WEC-Sim code refer to the refer to the <a class="reference internal" href="code_structure.html#code-structure"><span class="std std-ref">Code Structure</span></a> section.
For information about additional WEC-Sim features, refer to <a class="reference internal" href="advanced_features.html#advanced-features"><span class="std std-ref">Advanced Features</span></a>.</p>
<div class="section" id="two-body-point-absorber-rm3">
<h2>Two-Body Point Absorber (RM3)<a class="headerlink" href="#two-body-point-absorber-rm3" title="Permalink to this headline">¶</a></h2>
<p>This section describes the application of the WEC-Sim code to model the Reference Model 3 (RM3) two-body point absorber WEC.
This tutorial is provided in the WEC-Sim code release in the <code class="docutils literal notranslate"><span class="pre">$WECSIM/tutorials</span></code> directory.</p>
<div class="section" id="device-geometry">
<h3>Device Geometry<a class="headerlink" href="#device-geometry" title="Permalink to this headline">¶</a></h3>
<p>The RM3 two-body point absorber WEC has been characterized both numerically and experimentally as a result of the DOE-funded <a class="reference external" href="http://energy.sandia.gov/rmp">Reference Model Project</a>.
The RM3 is a two-body point absorber consisting of a float and a reaction  plate. Full-scale dimensions and mass properties of the RM3 are shown below.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/RM3_Geom.png"><img alt="../_images/RM3_Geom.png" src="../_images/RM3_Geom.png" style="width: 300pt;" /></a>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Body</th>
<th class="head">Mass (tonne)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Float</td>
<td>727.01</td>
</tr>
<tr class="row-odd"><td>Plate</td>
<td>878.30</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="14%" />
<col width="31%" />
<col width="15%" />
<col width="15%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Body</th>
<th class="head">Direction</th>
<th class="head">Center of Gravity* (m)</th>
<th class="head" colspan="3">Moment of Inertia Tensor (kg m^2)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3">Float</td>
<td>x</td>
<td>0</td>
<td>20,907,301</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>y</td>
<td>0</td>
<td>0</td>
<td>21,306,091</td>
<td>0</td>
</tr>
<tr class="row-even"><td>z</td>
<td>-0.72</td>
<td>0</td>
<td>0</td>
<td>37,085,481</td>
</tr>
<tr class="row-odd"><td rowspan="3">Plate</td>
<td>x</td>
<td>0</td>
<td>94,419,615</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-even"><td>y</td>
<td>0</td>
<td>0</td>
<td>94,407,091</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>z</td>
<td>-21.29</td>
<td>0</td>
<td>0</td>
<td>28,542,225</td>
</tr>
</tbody>
</table>
<p><strong>* The origin lies at the undisturbed free surface (SWL)</strong></p>
</div>
<div class="section" id="model-files">
<h3>Model Files<a class="headerlink" href="#model-files" title="Permalink to this headline">¶</a></h3>
<p>Below is an overview of the files required to run the RM3 simulation in WEC-Sim. For the RM3 WEC, there are two corresponding geometry files: <code class="docutils literal notranslate"><span class="pre">float.stl</span></code> and <code class="docutils literal notranslate"><span class="pre">plate.stl</span></code>. In addition to the required files listed below, users may supply a <code class="docutils literal notranslate"><span class="pre">userDefinedFunctions.m</span></code> file for post-processing results once the WEC-Sim run is complete.</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="35%" />
<col width="43%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>File Type</strong></td>
<td><strong>File Name</strong></td>
<td><strong>Directory</strong></td>
</tr>
<tr class="row-even"><td>Input File</td>
<td><code class="docutils literal notranslate"><span class="pre">wecSimInputFile.m</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">$WECSIM/tutorials/rm3/</span></code></td>
</tr>
<tr class="row-odd"><td>Simulink Model</td>
<td><code class="docutils literal notranslate"><span class="pre">rm3.slx</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">$WECSIM/tutorials/rm3/</span></code></td>
</tr>
<tr class="row-even"><td>Hydrodynamic Data</td>
<td><code class="docutils literal notranslate"><span class="pre">rm3.h5</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">$WECSIM/tutorials/rm3/hydroData/</span></code></td>
</tr>
<tr class="row-odd"><td>Geometry Files</td>
<td><code class="docutils literal notranslate"><span class="pre">float.stl</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">plate.stl</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">$WECSIM/tutorials/rm3/geometry/</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="rm3-tutorial">
<h3>RM3 Tutorial<a class="headerlink" href="#rm3-tutorial" title="Permalink to this headline">¶</a></h3>
<div class="section" id="step-1-run-bemio">
<h4>Step 1: Run BEMIO<a class="headerlink" href="#step-1-run-bemio" title="Permalink to this headline">¶</a></h4>
<p>Hydrodynamic data for each RM3 body must be parsed into a HDF5 file using <a class="reference internal" href="advanced_features.html#bemio"><span class="std std-ref">BEMIO</span></a>.
BEMIO converts hydrodynamic data from WAMIT, NEMOH, AQWA, or CAPYTAINE into a HDF5 file, <code class="docutils literal notranslate"><span class="pre">*.h5</span></code> that is then read by WEC-Sim.
The RM3 tutorial includes data from a WAMIT run, <code class="docutils literal notranslate"><span class="pre">rm3.out</span></code>, of the RM3 geometry in the <code class="docutils literal notranslate"><span class="pre">$WECSIM/tutorials/rm3/hydroData/</span></code> directory.
The RM3 WAMIT <code class="docutils literal notranslate"><span class="pre">rm3.out</span></code> file and the BEMIO <code class="docutils literal notranslate"><span class="pre">bemio.m</span></code> script are then used to generate the <code class="docutils literal notranslate"><span class="pre">rm3.h5</span></code> file.</p>
<p>This is done by navigating to the <code class="docutils literal notranslate"><span class="pre">$WECSIM/tutorials/rm3/hydroData/</span></code> directory, and typing``bemio`` in the MATLAB Command Window:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span> <span class="n">bemio</span>
</pre></div>
</div>
</div>
<div class="section" id="step-2-build-simulink-model">
<h4>Step 2: Build Simulink Model<a class="headerlink" href="#step-2-build-simulink-model" title="Permalink to this headline">¶</a></h4>
<p>The WEC-Sim Simulink model is created by dragging and dropping blocks from the <em>WEC-Sim Library</em> into the <code class="docutils literal notranslate"><span class="pre">rm3.slx</span></code> file. When setting up a WEC-Sim model, it is very important to note the base and follower frames. The base port should always connect ‘towards’ the Global Reference Frame, while the follower port connects ‘away’ from the reference frame. Also, a base port should always connect to a follower port. The same port type should not be connected (i.e. no base-base or follower-follower connections).</p>
<ul class="simple">
<li>Place two <strong>Rigid Body</strong> blocks from <em>Body Elements</em> in <em>WEC-Sim Library</em> in the Simulink model file, one for each RM3 rigid body.</li>
<li>Double click on the <strong>Rigid Body</strong> block, and rename each instance of the body. The first body must be called <code class="docutils literal notranslate"><span class="pre">body(1)</span></code>, and the second body should be called <code class="docutils literal notranslate"><span class="pre">body(2)</span></code>.</li>
</ul>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/RM3_WECSim_Body.jpg"><img alt="../_images/RM3_WECSim_Body.jpg" src="../_images/RM3_WECSim_Body.jpg" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li>Place the <strong>Global Reference Frame</strong> from <em>Frames</em> in the <em>WEC-Sim Library</em> in the Simulink model file. The global reference frame acts as the seabed.</li>
</ul>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/RM3_WECSim_GlobalRef.jpg"><img alt="../_images/RM3_WECSim_GlobalRef.jpg" src="../_images/RM3_WECSim_GlobalRef.jpg" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li>Place the <strong>Floating (3DOF)</strong> block from <em>Constrains</em> to connect the plate to the seabed. This constrains the plate to move in 3DOF relative to the <strong>Global Reference Frame</strong>.</li>
<li>Place the <strong>Translational PTO</strong> block  from <em>PTOs</em> to connect the float to the spar. This constrains the float to move in heave relative to the spar, and allows definition of PTO damping.</li>
</ul>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/RM3_WECSim.JPG"><img alt="../_images/RM3_WECSim.JPG" src="../_images/RM3_WECSim.JPG" style="width: 400pt;" /></a>
</div>
</div>
<div class="section" id="step-3-write-wecsiminputfile-m">
<h4>Step 3: Write wecSimInputFile.m<a class="headerlink" href="#step-3-write-wecsiminputfile-m" title="Permalink to this headline">¶</a></h4>
<p>The WEC-Sim input file defines simulation parameters, body properties, joints, and mooring for the RM3 model. The <code class="docutils literal notranslate"><span class="pre">wecSimInputFile.m</span></code> for the RM3 is provided in the RM3 case directory, and shown below.</p>
<p>New users should manually write the wecSimInputFile.m to become familiar with the set-up parameters and the files being called in a basic WEC-Sim run. First, define the simulation parameters. Initialize an instance of the simulationClass. Define the simulink file to use, the start, ramp and end times, and the time step required. The simulation class also controls all relevant numerical options and simulation-wide parameters in a single convenient class.</p>
<p>Next set-up the type of incoming wave by instantiating the waveClass. ‘Regular’ is a sinusoidal wave and the easiest to start with. Define an appropriate wave height and period. Waves can also be an irregular spectrum, imported by elevation or spectrum, or multidirectional.</p>
<p>Third, define all bodies, PTOs and contraints present in the simulink file. There are distinct classes for bodies, PTOs and contraints that contain different properties and function differently. Bodies are hydrodynamic and contain mass and geometry properties. Initialize bodies by calling the bodyClass and the path to the relevant h5 file. Set the path to the geometry file, and define the body’s mass properties. PTOs and constraints are more simple and contain forces and power dissipation (in the constraint) that limit the WEC’s motion. PTOs and constraints can be set by calling the appropriate class with the Simulink block name. Set the location and any PTO damping or stiffness desired.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="c">%% Simulation Data</span><span class="w"></span>
<span class="n">simu</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">simulationClass</span><span class="p">();</span><span class="w">                       </span><span class="c">% Initialize simulationClass</span><span class="w"></span>
<span class="n">simu</span><span class="p">.</span><span class="n">simMechanicsFile</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;RM3.slx&#39;</span><span class="p">;</span><span class="w">              </span><span class="c">% Simulink Model File</span><span class="w"></span>
<span class="n">simu</span><span class="p">.</span><span class="n">startTime</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">                             </span><span class="c">% Simulation Start Time [s]</span><span class="w"></span>
<span class="n">simu</span><span class="p">.</span><span class="n">rampTime</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span><span class="w">                         	</span><span class="c">% Wave Ramp Time [s]</span><span class="w"></span>
<span class="n">simu</span><span class="p">.</span><span class="n">endTime</span><span class="p">=</span><span class="mi">400</span><span class="p">;</span><span class="w">                               </span><span class="c">% Simulation End Time [s]</span><span class="w"></span>
<span class="n">simu</span><span class="p">.</span><span class="n">dt</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">0.1</span><span class="p">;</span><span class="w">                                  </span><span class="c">% Simulation time-step [s]</span><span class="w"></span>

<span class="c">%% Wave Information  </span><span class="w"></span>
<span class="c">% Regular Waves </span><span class="w"></span>
<span class="n">waves</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">waveClass</span><span class="p">(</span><span class="s">&#39;regular&#39;</span><span class="p">);</span><span class="w">                   </span><span class="c">% Initialize waveClass</span><span class="w"></span>
<span class="n">waves</span><span class="p">.</span><span class="n">H</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">2.5</span><span class="p">;</span><span class="w">                                  </span><span class="c">% Wave Height [m]</span><span class="w"></span>
<span class="n">waves</span><span class="p">.</span><span class="n">T</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span><span class="w">                                    </span><span class="c">% Wave Period [s]</span><span class="w"></span>

<span class="c">%% Body Data</span><span class="w"></span>
<span class="c">% Float</span><span class="w"></span>
<span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">bodyClass</span><span class="p">(</span><span class="s">&#39;hydroData/rm3.h5&#39;</span><span class="p">);</span><span class="w">        </span><span class="c">% Initialize bodyClass for Float</span><span class="w"></span>
<span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">geometryFile</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;geometry/float.stl&#39;</span><span class="p">;</span><span class="w">    </span><span class="c">% Geometry File</span><span class="w"></span>
<span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">mass</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;equilibrium&#39;</span><span class="p">;</span><span class="w">                   </span><span class="c">% Mass [kg]</span><span class="w"></span>
<span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">momOfInertia</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mi">20907301</span><span class="w"> </span><span class="mf">21306090.66</span><span class="w"> </span><span class="mf">37085481.11</span><span class="p">];</span><span class="w">  </span><span class="c">% Moment of Inertia [kg*m^2]     </span><span class="w"></span>

<span class="c">% Spar/Plate</span><span class="w"></span>
<span class="n">body</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">bodyClass</span><span class="p">(</span><span class="s">&#39;hydroData/rm3.h5&#39;</span><span class="p">);</span><span class="w">        </span><span class="c">% Initialize bodyClass for Spar</span><span class="w"></span>
<span class="n">body</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="n">geometryFile</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;geometry/plate.stl&#39;</span><span class="p">;</span><span class="w">    </span><span class="c">% Geometry File</span><span class="w"></span>
<span class="n">body</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="n">mass</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;equilibrium&#39;</span><span class="p">;</span><span class="w">                   </span><span class="c">% Mass [kg]</span><span class="w"></span>
<span class="n">body</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="n">momOfInertia</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mf">94419614.57</span><span class="w"> </span><span class="mf">94407091.24</span><span class="w"> </span><span class="mf">28542224.82</span><span class="p">];</span><span class="w"> </span><span class="c">% Moment of Inertia [kg*m^2]</span><span class="w"></span>

<span class="c">%% PTO and Constraint Parameters</span><span class="w"></span>
<span class="c">% Floating (3DOF) Joint</span><span class="w"></span>
<span class="n">constraint</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">constraintClass</span><span class="p">(</span><span class="s">&#39;Constraint1&#39;</span><span class="p">);</span><span class="w"> </span><span class="c">% Initialize constraintClass for Constraint1</span><span class="w"></span>
<span class="n">constraint</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">loc</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">];</span><span class="w">                    </span><span class="c">% Constraint Location [m]</span><span class="w"></span>

<span class="c">% Translational PTO</span><span class="w"></span>
<span class="n">pto</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">ptoClass</span><span class="p">(</span><span class="s">&#39;PTO1&#39;</span><span class="p">);</span><span class="w">                      </span><span class="c">% Initialize ptoClass for PTO1</span><span class="w"></span>
<span class="n">pto</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">k</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">                                   </span><span class="c">% PTO Stiffness [N/m]</span><span class="w"></span>
<span class="n">pto</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">c</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1200000</span><span class="p">;</span><span class="w">                             </span><span class="c">% PTO Damping [N/(m/s)]</span><span class="w"></span>
<span class="n">pto</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">loc</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">];</span><span class="w">                           </span><span class="c">% PTO Location [m]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="step-4-run-wec-sim">
<h4>Step 4: Run WEC-Sim<a class="headerlink" href="#step-4-run-wec-sim" title="Permalink to this headline">¶</a></h4>
<p>To execute the WEC-Sim code for the RM3 tutorial, type <code class="docutils literal notranslate"><span class="pre">wecSim</span></code> into the MATLAB Command Window. Below is a figure showing the final RM3 Simulink model and the WEC-Sim GUI during the simulation. For more information on using WEC-Sim to model the RM3 device, refer to <a class="reference internal" href="#ruehl-preliminary-2014" id="id2">[A1]</a>.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/RM3_WECSim_GUI.JPG"><img alt="../_images/RM3_WECSim_GUI.JPG" src="../_images/RM3_WECSim_GUI.JPG" style="width: 400pt;" /></a>
</div>
</div>
<div class="section" id="step-5-post-processing">
<h4>Step 5: Post-processing<a class="headerlink" href="#step-5-post-processing" title="Permalink to this headline">¶</a></h4>
<p>The RM3 tutorial includes a <code class="docutils literal notranslate"><span class="pre">userDefinedFunctions.m</span></code> which plots RM3 forces and responses. This file can be modified by users for post-processing. Additionally, once the WEC-Sim run is complete, the WEC-Sim results are saved to the <strong>output</strong> variable in the MATLAB workspace.</p>
</div>
</div>
</div>
<div class="section" id="oscillating-surge-wec-oswec">
<h2>Oscillating Surge WEC (OSWEC)<a class="headerlink" href="#oscillating-surge-wec-oswec" title="Permalink to this headline">¶</a></h2>
<p>This section describes the application of the WEC-Sim code to model the Oscillating Surge WEC (OSWEC).
This tutorial is provided in the WEC-Sim code release in the <code class="docutils literal notranslate"><span class="pre">$WECSIM/tutorials</span></code> directory.</p>
<div class="section" id="id3">
<h3>Device Geometry<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>The OSWEC was selected because its design is fundamentally different from the RM3. This is critical because WECs span an extensive design space, and it is important to model devices in WEC-Sim that operate under different principles.  The OSWEC is fixed to the ground and has a flap that is connected through a hinge to the base that restricts the flap in order to pitch about the hinge.
The full-scale dimensions and mass properties of the OSWEC are shown below.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/OSWEC_Geom.png"><img alt="../_images/OSWEC_Geom.png" src="../_images/OSWEC_Geom.png" style="width: 300pt;" /></a>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Body</th>
<th class="head">Mass (tonne)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Flap</td>
<td>127</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="14%" />
<col width="31%" />
<col width="15%" />
<col width="15%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Body</th>
<th class="head">Direction</th>
<th class="head">Center of Gravity* (m)</th>
<th class="head" colspan="3">Moment of Inertia Tensor (kg m^2)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="3">Flap</td>
<td>x</td>
<td>0</td>
<td>1,850,000</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>y</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="row-even"><td>z</td>
<td>-3.9</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p><strong>* The origin lies at the undisturbed free surface</strong></p>
</div>
<div class="section" id="id4">
<h3>Model Files<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>Below is an overview of the files required to run the OSWEC simulation in WEC-Sim.
For the OSWEC, there are two corresponding geometry files: <code class="docutils literal notranslate"><span class="pre">flap.stl</span></code> and <code class="docutils literal notranslate"><span class="pre">base.stl</span></code>.
In addition to the required files listed below, users may supply a <code class="docutils literal notranslate"><span class="pre">userDefinedFunctions.m</span></code> file for post-processing results once the WEC-Sim run is complete.</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="33%" />
<col width="45%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>File Type</strong></td>
<td><strong>File Name</strong></td>
<td><strong>Directory</strong></td>
</tr>
<tr class="row-even"><td>Input File</td>
<td><code class="docutils literal notranslate"><span class="pre">wecSimInputFile.m</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">$WECSIM/tutorials/oswec/</span></code></td>
</tr>
<tr class="row-odd"><td>Simulink Model</td>
<td><code class="docutils literal notranslate"><span class="pre">oswec.slx</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">$WECSIM/tutorials/oswec/</span></code></td>
</tr>
<tr class="row-even"><td>Hydrodynamic Data</td>
<td><code class="docutils literal notranslate"><span class="pre">oswec.h5</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">$WECSIM/tutorials/oswec/hydroData/</span></code></td>
</tr>
<tr class="row-odd"><td>Geometry Files</td>
<td><code class="docutils literal notranslate"><span class="pre">flap.stl</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">base.stl</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">$WECSIM/tutorials/oswec/geometry/</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="oswec-tutorial">
<h3>OSWEC Tutorial<a class="headerlink" href="#oswec-tutorial" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id5">
<h4>Step 1: Run BEMIO<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<p>Hydrodynamic data for each OSWEC body must be parsed into a HDF5 file using <a class="reference internal" href="advanced_features.html#bemio"><span class="std std-ref">BEMIO</span></a>.
BEMIO converts hydrodynamic data from WAMIT, NEMOH, AQWA, or CAPYTAINE into a HDF5 file, <code class="docutils literal notranslate"><span class="pre">*.h5</span></code> that is then read by WEC-Sim.
The OSWEC tutorial includes data from a WAMIT run, <code class="docutils literal notranslate"><span class="pre">oswec.out</span></code>, of the OSWEC geometry in the <code class="docutils literal notranslate"><span class="pre">$WECSIM/tutorials/rm3/hydroData/</span></code> directory.
The OSWEC WAMIT <code class="docutils literal notranslate"><span class="pre">oswec.out</span></code> file and the BEMIO <code class="docutils literal notranslate"><span class="pre">bemio.m</span></code> script are then used to generate the <code class="docutils literal notranslate"><span class="pre">oswec.h5</span></code> file.</p>
<p>This is done by navigating to the <code class="docutils literal notranslate"><span class="pre">$WECSIM/tutorials/oswec/hydroData/</span></code> directory, and typing``bemio`` in the MATLAB Command Window:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;&gt;</span> <span class="n">bemio</span>
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h4>Step 2: Build Simulink Model<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<p>The WEC-Sim Simulink model is created by dragging and dropping blocks from the <em>WEC-Sim Library</em> into the <code class="docutils literal notranslate"><span class="pre">oswec.slx</span></code> file.</p>
<ul class="simple">
<li>Place two <strong>Rigid Body</strong> blocks from the <em>WEC-Sim Library</em> in the Simulink model file, one for each OSWEC rigid body.</li>
<li>Double click on the <strong>Rigid Body</strong> block, and rename each instance of the body. The first body must be called <code class="docutils literal notranslate"><span class="pre">body(1)</span></code>, and the second body should be called <code class="docutils literal notranslate"><span class="pre">body(2)</span></code>.</li>
</ul>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/OSWEC_WECSim_Body.jpg"><img alt="../_images/OSWEC_WECSim_Body.jpg" src="../_images/OSWEC_WECSim_Body.jpg" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li>Place the <strong>Global Reference Frame</strong>  from <em>Frames</em> in the <em>WEC-Sim Library</em> in the Simulink model file. The global reference frame acts as the seabed.</li>
</ul>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/OSWEC_WECSim_GlobalRef.jpg"><img alt="../_images/OSWEC_WECSim_GlobalRef.jpg" src="../_images/OSWEC_WECSim_GlobalRef.jpg" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li>Place the <strong>Fixed</strong> block from <em>Constraints</em> to connect the base to the seabed. This constrains the base to be fixed relative to the <strong>Global Reference Frame</strong>.</li>
<li>Place a <strong>Rotational PTO</strong> block to connect the base to the flap. This constrains the flap to move in pitch relative to the base, and allows for the definition of PTO damping.</li>
</ul>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/OSWEC_WECSim.JPG"><img alt="../_images/OSWEC_WECSim.JPG" src="../_images/OSWEC_WECSim.JPG" style="width: 400pt;" /></a>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When setting up a WEC-Sim model, it is very important to note the base and follower frames.</p>
</div>
</div>
<div class="section" id="id7">
<h4>Step 3: Write wecSimInputFile.m<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<p>The WEC-Sim input file defines simulation parameters, body properties, and joints for the OSWEC model. Writing the OSWEC input file is similar to writing the RM3 input. Try writing it on your own. Define the simulation class, wave class, bodies, contraints and PTOs. The <code class="docutils literal notranslate"><span class="pre">wecSimInputFile.m</span></code> for the OSWEC is provided in the OSWEC case directory, and shown below.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="c">%% Simulation Data</span><span class="w"></span>
<span class="n">simu</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">simulationClass</span><span class="p">();</span><span class="w">                       </span><span class="c">% Initialize simulationClass</span><span class="w"></span>
<span class="n">simu</span><span class="p">.</span><span class="n">simMechanicsFile</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;OSWEC.slx&#39;</span><span class="p">;</span><span class="w">            </span><span class="c">% Simulink Model File</span><span class="w"></span>
<span class="n">simu</span><span class="p">.</span><span class="n">startTime</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">                             </span><span class="c">% Simulation Start Time [s]</span><span class="w"></span>
<span class="n">simu</span><span class="p">.</span><span class="n">rampTime</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span><span class="w">                            </span><span class="c">% Wave Ramp Time [s]</span><span class="w"></span>
<span class="n">simu</span><span class="p">.</span><span class="n">endTime</span><span class="p">=</span><span class="mi">400</span><span class="p">;</span><span class="w">                               </span><span class="c">% Simulation End Time [s]   </span><span class="w"></span>
<span class="n">simu</span><span class="p">.</span><span class="n">dt</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">0.1</span><span class="p">;</span><span class="w">                                  </span><span class="c">% Simulation Time-Step [s]</span><span class="w"></span>

<span class="c">%% Wave Information</span><span class="w"></span>
<span class="c">% Regular Waves </span><span class="w"></span>
<span class="n">waves</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">waveClass</span><span class="p">(</span><span class="s">&#39;regular&#39;</span><span class="p">);</span><span class="w">                   </span><span class="c">% Initialize waveClass                                 </span><span class="w"></span>
<span class="n">waves</span><span class="p">.</span><span class="n">H</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">2.5</span><span class="p">;</span><span class="w">                                  </span><span class="c">% Wave Height [m]</span><span class="w"></span>
<span class="n">waves</span><span class="p">.</span><span class="n">T</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span><span class="w">                                    </span><span class="c">% Wave Period [s]</span><span class="w"></span>

<span class="c">%% Body Data</span><span class="w"></span>
<span class="c">% Flap</span><span class="w"></span>
<span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">bodyClass</span><span class="p">(</span><span class="s">&#39;hydroData/oswec.h5&#39;</span><span class="p">);</span><span class="w">      </span><span class="c">% Initialize bodyClass for Flap </span><span class="w"></span>
<span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">geometryFile</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;geometry/flap.stl&#39;</span><span class="p">;</span><span class="w">     </span><span class="c">% Geometry File</span><span class="w"></span>
<span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">mass</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">127000</span><span class="p">;</span><span class="w">                          </span><span class="c">% Mass [kg]</span><span class="w"></span>
<span class="n">body</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">momOfInertia</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mf">1.85e6</span><span class="w"> </span><span class="mf">1.85e6</span><span class="w"> </span><span class="mf">1.85e6</span><span class="p">];</span><span class="w">  </span><span class="c">% Moment of Inertia [kg-m^2]</span><span class="w"></span>

<span class="c">% Base</span><span class="w"></span>
<span class="n">body</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">bodyClass</span><span class="p">(</span><span class="s">&#39;hydroData/oswec.h5&#39;</span><span class="p">);</span><span class="w">      </span><span class="c">% Initialize bodyClass for Base</span><span class="w"></span>
<span class="n">body</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="n">geometryFile</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;geometry/base.stl&#39;</span><span class="p">;</span><span class="w">     </span><span class="c">% Geometry File</span><span class="w"></span>
<span class="n">body</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="n">mass</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;fixed&#39;</span><span class="p">;</span><span class="w">                         </span><span class="c">% Creates Fixed Body</span><span class="w"></span>

<span class="c">%% PTO and Constraint Parameters</span><span class="w"></span>
<span class="c">% Fixed</span><span class="w"></span>
<span class="n">constraint</span><span class="p">(</span><span class="mi">1</span><span class="p">)=</span><span class="w"> </span><span class="n">constraintClass</span><span class="p">(</span><span class="s">&#39;Constraint1&#39;</span><span class="p">);</span><span class="w">  </span><span class="c">% Initialize constraintClass for Constraint1</span><span class="w"></span>
<span class="n">constraint</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">loc</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">-</span><span class="mi">10</span><span class="p">];</span><span class="w">                  </span><span class="c">% Constraint Location [m]</span><span class="w"></span>

<span class="c">% Rotational PTO</span><span class="w"></span>
<span class="n">pto</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">ptoClass</span><span class="p">(</span><span class="s">&#39;PTO1&#39;</span><span class="p">);</span><span class="w">                      </span><span class="c">% Initialize ptoClass for PTO1</span><span class="w"></span>
<span class="n">pto</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">k</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">                                   </span><span class="c">% PTO Stiffness [Nm/rad]</span><span class="w"></span>
<span class="n">pto</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">c</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">                                   </span><span class="c">% PTO Damping [Nsm/rad]</span><span class="w"></span>
<span class="n">pto</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="n">loc</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">-</span><span class="mf">8.9</span><span class="p">];</span><span class="w">                        </span><span class="c">% PTO Location [m]</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="id8">
<h4>Step 4: Run WEC-Sim<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p>To execute the WEC-Sim code for the OSWEC tutorial, type <code class="docutils literal notranslate"><span class="pre">wecSim</span></code> into the MATLAB Command Window. Below is a figure showing the final OSWEC Simulink model and the WEC-Sim GUI during the simulation. For more information on using WEC-Sim to model the OSWEC device, refer to <a class="reference internal" href="#y-yu-development-2014" id="id9">[A2]</a><a class="reference internal" href="#y-yu-design-2014" id="id10">[A3]</a>.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/OSWEC_WECSim_GUI.jpg"><img alt="../_images/OSWEC_WECSim_GUI.jpg" src="../_images/OSWEC_WECSim_GUI.jpg" style="width: 400pt;" /></a>
</div>
</div>
<div class="section" id="id11">
<h4>Step 5: Post-processing<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<p>The OSWEC tutorial includes a <code class="docutils literal notranslate"><span class="pre">userDefinedFunctions.m</span></code> which plots OSWEC forces and responses. This file can be modified by users for post-processing. Additionally, once the WEC-Sim run is complete, the WEC-Sim results are saved to the <strong>output</strong> variable in the MATLAB workspace.</p>
</div>
</div>
</div>
<div class="section" id="wec-sim-examples">
<h2>WEC-Sim Examples<a class="headerlink" href="#wec-sim-examples" title="Permalink to this headline">¶</a></h2>
<p>Working examples of using WEC-Sim to model the RM3 and OSWEC are provided in the <code class="docutils literal notranslate"><span class="pre">$WECSIM/examples/</span></code> directory.
For each example the <code class="docutils literal notranslate"><span class="pre">wecSimInputFile.m</span></code> provided includes examples of how to run different wave cases:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">noWaveCIC</span></code> - no wave with convolution integral calculation</li>
<li><code class="docutils literal notranslate"><span class="pre">regularCIC</span></code> - regular waves with convolution integral calculation</li>
<li><code class="docutils literal notranslate"><span class="pre">irregular</span></code> - irregular waves using a Pierson-Moskowitz spectrum with convolution integral calculation</li>
<li><code class="docutils literal notranslate"><span class="pre">irregular</span></code> - irregular waves using a Bretschneider Spectrum with state space calculation</li>
<li><code class="docutils literal notranslate"><span class="pre">spectrumImport</span></code> - irregular waves using a user-defined spectrum</li>
<li><code class="docutils literal notranslate"><span class="pre">etaImport</span></code> - user-defined time-series</li>
</ul>
</div>
<div class="section" id="other-applications">
<h2>Other Applications<a class="headerlink" href="#other-applications" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://github.com/WEC-Sim/WEC-Sim_Applications">WEC-Sim Applications</a> repository contains many applications of the WEC-Sim code that demonstrate WEC-Sim <a class="reference internal" href="advanced_features.html#advanced-features"><span class="std std-ref">Advanced Features</span></a>. This includes tutorials by the WEC-Sim team as well as user-shared examples and covers topics from body interactions, numerical set-up, batch runs, visualization, control examples, mooring and many more cases. These applications highlight the versatility of WEC-Sim and can be used as a starting point for users interested in a given application.
The WEC-Sim Applications repository is included as a <a class="reference external" href="https://git-scm.com/book/en/v2/Git-Tools-Submodules">submodule</a> of the WEC-Sim repository. The applications are summarized below.</p>
<div class="section" id="body-to-body-interactions">
<h3>Body-to-Body Interactions<a class="headerlink" href="#body-to-body-interactions" title="Permalink to this headline">¶</a></h3>
<p>Example using <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/advanced_features.html#body-to-body-interactions">Body-to-Body (B2B)</a> to run WEC-Sim for the <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/tutorials.html#two-body-point-absorber-rm3">RM3</a> geometry. The scripts run and plot the RM3 model with B2B on/off and with Regular/RegularCIC. Execute the <cite>runB2B.m</cite> script to run this case.</p>
</div>
<div class="section" id="desalination">
<h3>Desalination<a class="headerlink" href="#desalination" title="Permalink to this headline">¶</a></h3>
<p>Example using WEC-Sim for desalination based on the <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/tutorials.html#oscillating-surge-wec-oswec">OSWEC</a> geometry. Note the dependency on SimScape Fluids to run this desalination case.</p>
</div>
<div class="section" id="free-decay">
<h3>Free Decay<a class="headerlink" href="#free-decay" title="Permalink to this headline">¶</a></h3>
<p>Example using WEC-Sim to simulate <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/advanced_features.html#decay-tests">free decay</a> of a sphere in heave, using <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/advanced_features.html#multiple-condition-runs-mcr">Multiple Condition Runs</a>.  Execute the <cite>runFreeDecay.m</cite> script to run this case.</p>
</div>
<div class="section" id="generalized-body-modes">
<h3>Generalized Body Modes<a class="headerlink" href="#generalized-body-modes" title="Permalink to this headline">¶</a></h3>
<p>Example using <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/advanced_features.html#generalized-body-modes">Generalized Body Modes</a> in WEC-Sim. In this application a barge is allowed four additional flexible degrees of freedom. Note that this requires the BEM solver also account for these general degrees of freedom and output the appropriate quantities required by BEMIO.</p>
</div>
<div class="section" id="mooring">
<h3>Mooring<a class="headerlink" href="#mooring" title="Permalink to this headline">¶</a></h3>
<p>One example using the <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/tutorials.html#two-body-point-absorber-rm3">RM3</a> geometry coupled with <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/advanced_features.html#moordyn">MoorDyn</a> to simulate a more realistic mooring system. And another example modeling the RM3 with a Mooring Matrix. The MoorDyn application consists of 3 catenary mooring lines attached to floating buoys and then to different points on the spar and anchored at the sea floor.</p>
</div>
<div class="section" id="multiple-condition-run">
<h3>Multiple Condition Run<a class="headerlink" href="#multiple-condition-run" title="Permalink to this headline">¶</a></h3>
<p>Example using <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/advanced_features.html#multiple-condition-runs-mcr">Multiple Condition Runs (MCR)</a> to run WEC-Sim with Multiple Condition Runs for the <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/tutorials.html#two-body-point-absorber-rm3">RM3</a>. These examples demonstrate each of the 3 different ways to run WEC-Sim with MCR and generates a power matrix for each PTO damping value. The last example demonstrates how to use MCR to vary the imported sea state test file and specify corresponding phase. Execute <cite>wecSimMCR.m</cite> from the case directory to run an example.</p>
<ul class="simple">
<li>MCROPT1: Cases defined using arrays of values for period and height.</li>
<li>MCROPT2: Cases defined with wave statistics in an Excel spreadsheet</li>
<li>MCROPT3: Cases defined in a MATLAB data file (<code class="docutils literal notranslate"><span class="pre">.mat</span></code>)</li>
<li>MCROPT4: Cases defined using several MATLAB data files (<code class="docutils literal notranslate"><span class="pre">*.mat</span></code>) of the wave spectrum</li>
</ul>
</div>
<div class="section" id="nonhydrodynamic-body">
<h3>Nonhydrodynamic Body<a class="headerlink" href="#nonhydrodynamic-body" title="Permalink to this headline">¶</a></h3>
<p>Example using <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/advanced_features.html#non-hydrodynamic-bodies">Non-Hydro Body</a> to run WEC-Sim for the <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/tutorials.html#oscillating-surge-wec-oswec">OSWEC</a>. This example models the base as a nonhydro body, and the flap as a hydrodynamic body.</p>
</div>
<div class="section" id="nonlinear-hydrodynamic-body">
<h3>Nonlinear Hydrodynamic Body<a class="headerlink" href="#nonlinear-hydrodynamic-body" title="Permalink to this headline">¶</a></h3>
<p>Example using <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/advanced_features.html#nonlinear-buoyancy-and-froude-krylov-excitation">Nonlinear Hydro</a> to run WEC-Sim for a <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/advanced_features.html#nonlinear-buoyancy-and-froude-krylov-wave-excitation-tutorial-heaving-ellipsoid">heaving ellipsoid</a>. Includes examples of running non-linear hydrodynamics with different <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/advanced_features.html#time-step-features">fixed and variable time-step solvers</a> (ode4/ode45), and different regular wave formulations (with/without CIC). Execute the <cite>runNL.m</cite> script to run this case.</p>
</div>
<div class="section" id="numerical-options">
<h3>Numerical Options<a class="headerlink" href="#numerical-options" title="Permalink to this headline">¶</a></h3>
<p>Example that compares various numerical options in WEC-Sim. This case compares the differential equation solver <a class="reference external" href="https://wec-sim.github.io/WEC-Sim/advanced_features.html#time-step-features">time step settings</a> (<code class="docutils literal notranslate"><span class="pre">ode4,</span> <span class="pre">ode45</span></code>), the <a class="reference external" href="https://wec-sim.github.io/WEC-Sim/theory.html#convolution-integral-formulation">convolution integral</a> and the <a class="reference external" href="https://wec-sim.github.io/WEC-Sim/theory.html#state-space">state-space</a> representations. Execute the <cite>run_NumOpt.m</cite> script to run this case.</p>
</div>
<div class="section" id="paraview-visualization">
<h3>Paraview Visualization<a class="headerlink" href="#paraview-visualization" title="Permalink to this headline">¶</a></h3>
<p>Example using ParaView data visualization for WEC-Sim coupled with <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/advanced_features.html#moordyn">MoorDyn</a> to simulate a more realistic mooring system for the <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/tutorials.html#two-body-point-absorber-rm3">RM3</a> geometry. Example consists of 3 catenary mooring lines attached to different points on the spar and anchored at the sea floor.</p>
<p>Example using ParaView data visualization for WEC-Sim with <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/advanced_features.html#nonlinear-buoyancy-and-froude-krylov-excitation">Non-linear Hydro</a> for the Flap and a <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/advanced_features.html#non-hydrodynamic-bodies">Non-Hydro Body</a> for the Base to run WEC-Sim for the <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/tutorials.html#oscillating-surge-wec-oswec">OSWEC</a> geometry.</p>
</div>
<div class="section" id="passive-yaw">
<h3>Passive Yaw<a class="headerlink" href="#passive-yaw" title="Permalink to this headline">¶</a></h3>
<p>Example on using <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/advanced_features.html#passive-yaw-implementation">Passive Yaw</a> to run WEC-Sim for the <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/tutorials.html#oscillating-surge-wec-oswec">OSWEC</a> geometry. Execute the <cite>runYawCases.m</cite> script to run this case.</p>
</div>
<div class="section" id="pto-sim">
<h3>PTO-Sim<a class="headerlink" href="#pto-sim" title="Permalink to this headline">¶</a></h3>
<p>Examples using <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/advanced_features.html#pto-sim">PTO-Sim</a>. Examples of WEC-Sim models using PTO-Sim are included for the <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/tutorials.html#two-body-point-absorber-rm3">RM3</a> geometry and <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/tutorials.html#oscillating-surge-wec-oswec">OSWEC</a> geometry.</p>
</div>
<div class="section" id="wecccomp">
<h3>WECCCOMP<a class="headerlink" href="#wecccomp" title="Permalink to this headline">¶</a></h3>
<p>Numerical model for the WEC Control Competition (WECCCOMP) using WEC-Sim to model the WaveStar with various fault implementations. See the project report written by Erica Lindbeck in the “report” folder.</p>
</div>
<div class="section" id="write-hdf5">
<h3>Write HDF5<a class="headerlink" href="#write-hdf5" title="Permalink to this headline">¶</a></h3>
<p>This is an example of how to write your own h5 file using MATLAB.
Can be useful if you want to modify your coefficients, use experimental coefficients, or coefficients from another BEM code other than NEMOH, WAMIT, AQWA, or CAPYTAINE.
For more details see <a class="reference external" href="http://wec-sim.github.io/WEC-Sim/features.html#bemio-writing-your-own-h5-file">BEMIO feature</a> documentation.</p>
</div>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<p id="bibtex-bibliography-man/tutorials-0"><table class="docutils citation" frame="void" id="ruehl-preliminary-2014" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[A1]</a></td><td>K. Ruehl, C. Michelen, S. Kanner, M. Lawson, and Y. Yu. Preliminary Verification and Validation of WEC-Sim, an Open-Source Wave Energy Converter Design Tool. In <em>Proceedings of OMAE 2014</em>. San Francisco, CA, 2014.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="y-yu-development-2014" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id9">[A2]</a></td><td>Y. Yu, M. Lawson, K. Ruehl, and C. Michelen. Development and Demonstration of the WEC-Sim Wave Energy Converter Simulation Tool. In <em>Proceedings of the 2nd Marine Energy Technology Symposium</em>. Seattle, WA, USA, 2014.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="y-yu-design-2014" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id10">[A3]</a></td><td>Y. Yu, Y. Li, K. Hallett, and C. Hotimsky. Design and Analysis for a Floating Oscillating Surge Wave Energy Converter. In <em>Proceedings of OMAE 2014</em>. San Francisco, CA, 2014.</td></tr>
</tbody>
</table>
</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="advanced_features.html" class="btn btn-neutral float-right" title="Advanced Features" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="code_structure.html" class="btn btn-neutral float-left" title="Code Structure" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, National Renewable Energy Laboratory and National Technology &amp; Engineering Solutions of Sandia, LLC (NTESS).

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: master
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Branches</dt>
            <dd><a href="../../dev/index.html">dev</a></dd>
            <dd><a href="tutorials.html">master</a></dd>
        </dl>
    </div>
</div>


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-88158104-1', 'auto');
    
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>